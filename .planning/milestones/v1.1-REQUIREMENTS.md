# Requirements Archive: CCLink v1.1

**Milestone:** v1.1 Security Hardening & Code Review Fixes
**Archived:** 2026-02-22
**Status:** All 11 requirements complete

## v1.1 Requirements

### Security

- [x] **SEC-01**: Handoff payload signs burn and recipient fields (clean break from v1.0 unsigned format) -- Phase 6, Complete
- [x] **SEC-02**: Key file permissions (0600) enforced explicitly in cclink code, not just delegated to pkarr -- Phase 6, Complete
- [x] **SEC-03**: User can publish PIN-protected handoff (`--pin`) with Argon2id+HKDF-derived encryption key -- Phase 9, Complete

### Functional

- [x] **FUNC-01**: `--burn` and `--share` are mutually exclusive (CLI errors if both specified) -- Phase 8, Complete
- [x] **FUNC-02**: Self-publish success message shows correct pickup command (not raw token) -- Phase 8, Complete
- [x] **FUNC-03**: HomeserverClient reuses session cookies instead of signing in on every operation -- Phase 7, Complete
- [x] **FUNC-04**: Transport layer uses correct Pubky homeserver API (Host header for tenant identification, signup/session flow, pubky:// URI parsing) -- Phase 10, Complete

### Code Quality

- [x] **QUAL-01**: `human_duration` extracted to shared utility (no duplication across commands) -- Phase 7, Complete
- [x] **QUAL-02**: Error handling uses structured `CclinkError` variants instead of string matching on "404"/"not found" -- Phase 7, Complete
- [x] **QUAL-03**: Dead `CclinkError` variants removed -- Phase 7, Complete
- [x] **QUAL-04**: List command fetches records efficiently (not N+1 individual HTTP requests) -- Phase 7, Complete

### Documentation

- [x] **DOCS-01**: PRD updated to reflect `~/.pubky/` paths instead of stale `~/.cclink/keys` references -- Phase 8, Complete

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| SEC-01 | Phase 6 | Complete |
| SEC-02 | Phase 6 | Complete |
| SEC-03 | Phase 9 | Complete |
| FUNC-01 | Phase 8 | Complete |
| FUNC-02 | Phase 8 | Complete |
| FUNC-03 | Phase 7 | Complete |
| FUNC-04 | Phase 10 | Complete |
| QUAL-01 | Phase 7 | Complete |
| QUAL-02 | Phase 7 | Complete |
| QUAL-03 | Phase 7 | Complete |
| QUAL-04 | Phase 7 | Complete |
| DOCS-01 | Phase 8 | Complete |

**Coverage:** 11/11 requirements satisfied (100%)

## Requirement Outcomes

- **SEC-01**: Validated -- tamper detection proven by unit + integration tests
- **SEC-02**: Validated -- remediation-oriented error messages, non-Unix no-op fallback
- **SEC-03**: Validated -- Argon2id+HKDF-SHA256 PIN key derivation, end-to-end wiring
- **FUNC-01**: Validated -- clap conflicts_with annotation, parse-time rejection
- **FUNC-02**: Validated -- self-publish shows `cclink pickup`, not raw token
- **FUNC-03**: Superseded -- homeserver transport replaced with PKARR DHT (no sessions needed)
- **FUNC-04**: Superseded -- homeserver transport replaced with PKARR DHT (no homeserver needed)
- **QUAL-01**: Validated -- human_duration in src/util.rs, shared by all commands
- **QUAL-02**: Validated -- CclinkError::RecordNotFound with downcast_ref pattern
- **QUAL-03**: Validated -- 5 dead variants removed, zero compiler warnings
- **QUAL-04**: Superseded -- single DHT resolve per identity (no HTTP requests)
- **DOCS-01**: Validated -- PRD paths corrected to ~/.pubky/secret_key

---
*Archived: 2026-02-22*
